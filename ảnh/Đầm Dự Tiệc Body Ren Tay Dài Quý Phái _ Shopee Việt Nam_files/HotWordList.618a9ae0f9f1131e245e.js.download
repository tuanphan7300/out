(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[115],{3328:function(t,e,r){t.exports={keyword:"F2JPgx"}},3329:function(t,e,r){t.exports={container:"_1HpIaC",list:"JpRXYU"}},3877:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r(66),o=r(53),i=r(592),c=r.n(i),s=r(391),u=r(589),l=r(412),p=r(325),f=r(916),d=r(3328),h=r.n(d);var v=f.a.searchWithQuery,y=function(t){var e,r;function n(e){var r;return(r=t.call(this,e)||this).onClick=r.onClick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=n.prototype;return o.onClick=function(){var t=this.props,e=t.keyword,r=t.trackingClick,a=t.searchParams,n=t.targetSearchParams,o=t.recordSearchHistory,i=t.index;Object(u.a)({action:"submitKeyboardSearch",data:{keyword:e,inputType:"popular_search",targetSearchParams:n,searchParams:a,isMallSearch:!!this.context.isOfficialShopPath,absoluteLocation:i,relativeLocation:i},track:this.props.contextOnTrack}),o("product",e),r&&r()},o.render=function(){var t=this.props,e=t.trackingRef,r=t.keyword,n=t.targetSearchParams;return a.createElement(s.a,{onClick:this.onClick,to:v(n),className:h.a.keyword,innerRef:e},r)},n}(a.Component);y.contextTypes={isOfficialShopPath:c.a.bool};var b,m,O=Object(o.d)(Object(l.b)("HotwordItem"),Object(p.a)())(y),k=r(20),g=r(281),S=r(9),_=r(1),C=Object(_.b)("FETCH_POP_SEARCH"),E="popsearch_sec";function j(){return(j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var w={progress:S.b.INIT,state_update_time:0},P={update_time:0,version:"",sections:(b={},b[E]={total:0,data:[]},b)},R=Object(k.a)(((m={})[C.REQUESTED]=function(t){return j({},t,{progress:S.b.REQ,error:0,state_update_time:0})},m[C.SUCCESS]=function(t,e){var r,a=e.payload,n=a.offset,o=a.data,i=a.shouldReset,c=t&&t.data||P;return j({},t,{data:j({},c,{update_time:o.update_time,version:o.version,sections:j({},c.sections,(r={},r[E]={total:o.sections[E].total,data:Object(g.b)(i?[]:c.sections[E].data,o.sections[E].data,n)},r))}),progress:S.b.OK,state_update_time:Date.now()})},m[C.FAILED]=function(t,e){var r=e.payload.error;return j({},t,{progress:S.b.ERR,error:r})},m),w),I=r(40),x=r(13),T=r(2),D="/api/v4/recommend/recommend";function H(t){var e,r={update_time:t.data.update_time,version:t.data.version,sections:(e={},e[E]={total:0,data:[]},e)},a=t.data.sections.find(function(t){return t&&t.key===E});if(!a||!a.index||!a.data)return r;var n=a.index,o=a.data,i=a.total;return r.sections[E].total=i||0,n.forEach(function(t){var e=o.keyword.find(function(e){return e.key===t.key});e&&r.sections[E].data.push(e)}),r}function F(t){var e=t.limit,r=void 0===e?8:e,a=t.offset,n=void 0===a?0:a,o=t.getStore,i=t.onFinish,c=t.shouldSkipCall,s=t.shouldReset,u=t.version,l=Object(x.f)({bundle:"popsearch",limit:r,offset:n,version:n>0&&u||void 0});return Object(I.a)({apiCall:function(){return function(t){return Object(T.fetchInfo)(""+D+t)}(l)},actions:[function(){return{type:C.REQUESTED}},function(t,e){return{type:C.SUCCESS,payload:{offset:n,data:H(e),shouldReset:s}}},function(t,e){return{type:C.FAILED,payload:{error:e.error}}}],shouldSkipCall:o&&!c?N(o):c,onFinish:i})}function N(t){return function(e){var r=t(e);return!!(r&&r&&r.state_update_time)&&r.state_update_time>Date.now()-6e4}}var A=[];function Q(){return(Q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var U=r(268),J=r(1112);function L(){return(L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function K(t,e,r,a){void 0===a&&(a=!1);var n={};return a&&(n.officialMall=!0),r?(t&&(n.keyword=t),e&&(n=L({},Object(J.a)({searchPrefill:e.searchPrefill,category:e.category,subcategory:e.subcategory,shop:e.shop,site:e.site,collection:e.collection,promotionId:e&&e.promotionId}),function(t){var e=t.signature,r=t.voucherCode,a=t.promotionId,n=t.source;return Boolean(e&&r&&a)?{signature:e,voucherCode:r,promotionId:a,source:n}:{}}(e),n,{noCorrection:e.searchPrefill?e.noCorrection:void 0}))):t&&(t=t.trim().replace(/\s+/g," "),n.keyword=t),n}var M="popSearch",Y=r(3329),B=r.n(Y),W=[S.b.INIT,S.b.REQ];function X(t){return t[M]}e.default=function(t){var e=t.searchParams,r=a.useContext(U.a).injectAsyncReducer;a.useEffect(function(){var t;r(((t={})[M]=R,t))},[r]);var o=Object(n.useDispatch)();a.useEffect(function(){o(F({offset:0,limit:8,getStore:X}))},[o]);var i,c=a.useCallback(function(t,e){o(function(t,e,r){return void 0===r&&(r={}),Q({type:"RECORD_SEARCH_HISTORY",searchType:t,data:e},r,{isOfficialShop:!1})}(t,e))},[o]),s=Object(n.useSelector)(X);if(W.includes((i=s)?i.progress:S.b.INIT))return null;var u=function(t){return t&&t.data?t.data.sections[E].data:A}(s);return!u||u.length<2?null:a.createElement("div",{className:B.a.container},a.createElement("div",{className:B.a.list},u.map(function(t,r){var n=t.keyword,o=t.info,i=t.label;if(!n)return null;var s=K(n,e);return a.createElement(O,{key:n,keyword:n,recordSearchHistory:c,index:r,searchParams:e,targetSearchParams:s,info:o,intentionid:i})})))}}}]);
//# sourceMappingURL=https://shopee.sg/assets/HotWordList.618a9ae0f9f1131e245e.js.map